### Report Summary

File:| /scratch/chenyuan-data/linux-debug/lib/test_xarray.c
---|---
Warning:| line 1170, column 2
Shift done in 32-bit, widened after; cast left operand to 64-bit before <<

### Annotated Source Code


1117  |  if (xas_nomem(&xas, GFP_KERNEL)) {
1118  | 		count = 0;
1119  |  goto retry;
1120  | 	}
1121  |  XA_BUG_ON(xa, xas_error(&xas));
1122  |  XA_BUG_ON(xa, count != present);
1123  |  XA_BUG_ON(xa, xa_load(xa, start) != xa_mk_index(start));
1124  |  XA_BUG_ON(xa, xa_load(xa, start + (1UL << order) - 1) !=
1125  |  xa_mk_index(start));
1126  | 	xa_erase_index(xa, start);
1127  | }
1128  |
1129  | static noinline void check_store_iter(struct xarray *xa)
1130  | {
1131  |  unsigned int i, j;
1132  |  unsigned int max_order = IS_ENABLED(CONFIG_XARRAY_MULTI) ? 20 : 1;
1133  |
1134  |  for (i = 0; i < max_order; i++) {
1135  |  unsigned int min = 1 << i;
1136  |  unsigned int max = (2 << i) - 1;
1137  | 		__check_store_iter(xa, 0, i, 0);
1138  |  XA_BUG_ON(xa, !xa_empty(xa));
1139  | 		__check_store_iter(xa, min, i, 0);
1140  |  XA_BUG_ON(xa, !xa_empty(xa));
1141  |
1142  | 		xa_store_index(xa, min, GFP_KERNEL);
1143  | 		__check_store_iter(xa, min, i, 1);
1144  |  XA_BUG_ON(xa, !xa_empty(xa));
1145  | 		xa_store_index(xa, max, GFP_KERNEL);
1146  | 		__check_store_iter(xa, min, i, 1);
1147  |  XA_BUG_ON(xa, !xa_empty(xa));
1148  |
1149  |  for (j = 0; j < min; j++)
1150  | 			xa_store_index(xa, j, GFP_KERNEL);
1151  | 		__check_store_iter(xa, 0, i, min);
1152  |  XA_BUG_ON(xa, !xa_empty(xa));
1153  |  for (j = 0; j < min; j++)
1154  | 			xa_store_index(xa, min + j, GFP_KERNEL);
1155  | 		__check_store_iter(xa, min, i, min);
1156  |  XA_BUG_ON(xa, !xa_empty(xa));
1157  | 	}
1158  | #ifdef CONFIG_XARRAY_MULTI
1159  | 	xa_store_index(xa, 63, GFP_KERNEL);
1160  | 	xa_store_index(xa, 65, GFP_KERNEL);
1161  | 	__check_store_iter(xa, 64, 2, 1);
1162  | 	xa_erase_index(xa, 63);
1163  | #endif
1164  |  XA_BUG_ON(xa, !xa_empty(xa));
1165  | }
1166  |
1167  | static noinline void check_multi_find_1(struct xarray *xa, unsigned order)
1168  | {
1169  | #ifdef CONFIG_XARRAY_MULTI
1170  |  unsigned long multi = 3 << order;
    1Assuming right operand of bit shift is less than 32→
    2←Shift done in 32-bit, widened after; cast left operand to 64-bit before <<
1171  |  unsigned long next = 4 << order;
1172  |  unsigned long index;
1173  |
1174  | 	xa_store_order(xa, multi, order, xa_mk_value(multi), GFP_KERNEL);
1175  |  XA_BUG_ON(xa, xa_store_index(xa, next, GFP_KERNEL) != NULL);
1176  |  XA_BUG_ON(xa, xa_store_index(xa, next + 1, GFP_KERNEL) != NULL);
1177  |
1178  | 	index = 0;
1179  |  XA_BUG_ON(xa, xa_find(xa, &index, ULONG_MAX, XA_PRESENT) !=
1180  |  xa_mk_value(multi));
1181  |  XA_BUG_ON(xa, index != multi);
1182  | 	index = multi + 1;
1183  |  XA_BUG_ON(xa, xa_find(xa, &index, ULONG_MAX, XA_PRESENT) !=
1184  |  xa_mk_value(multi));
1185  |  XA_BUG_ON(xa, (index < multi) || (index >= next));
1186  |  XA_BUG_ON(xa, xa_find_after(xa, &index, ULONG_MAX, XA_PRESENT) !=
1187  |  xa_mk_value(next));
1188  |  XA_BUG_ON(xa, index != next);
1189  |  XA_BUG_ON(xa, xa_find_after(xa, &index, next, XA_PRESENT) != NULL);
1190  |  XA_BUG_ON(xa, index != next);
1191  |
1192  | 	xa_erase_index(xa, multi);
1193  | 	xa_erase_index(xa, next);
1194  | 	xa_erase_index(xa, next + 1);
1195  |  XA_BUG_ON(xa, !xa_empty(xa));
1196  | #endif
1197  | }
1198  |
1199  | static noinline void check_multi_find_2(struct xarray *xa)
1200  | {
