- Decision: Bug
- Reason: The reported path ultimately calls bnxt_hwrm_exec_fwd_resp() (and possibly bnxt_hwrm_fwd_resp()), both of which do hwrm_req_init() successfully and then return without calling hwrm_req_drop() after hwrm_req_send(). That is exactly the target bug pattern: after a successful hwrm_req_init(), any exit must call hwrm_req_drop() to release the request buffer. In bnxt_hwrm_exec_fwd_resp() and bnxt_hwrm_fwd_resp(), there is no hwrm_req_drop() on either the success or error paths, causing a leak. While the warning is annotated at bnxt_vf_set_link()â€™s return, the actual leak source is its callee that performs the hwrm_req_init(). A correct fix would be to add hwrm_req_drop(bp, req) after hwrm_req_send() (and before all returns) in those hwrm helper wrappers, matching the intended cleanup pattern.
